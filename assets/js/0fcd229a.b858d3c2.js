"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3562],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8215:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(7294);function r(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},3736:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(7294),r=n(3117),i=n(2389),l=n(3342),o=n(6010),s="tabItem_LplD";function u(e){var t,n,i,u=e.lazy,c=e.block,d=e.defaultValue,p=e.values,m=e.groupId,h=e.className,f=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=p?p:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,l.lx)(k,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===d?d:null!=(t=null!=d?d:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=f[0])?void 0:i.props.value;if(null!==g&&!k.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=(0,l.UB)(),b=y.tabGroupChoices,w=y.setTabGroupChoices,N=(0,a.useState)(g),T=N[0],A=N[1],S=[],O=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var I=b[m];null!=I&&I!==T&&k.some((function(e){return e.value===I}))&&A(I)}var x=function(e){var t=e.currentTarget,n=S.indexOf(t),a=k[n].value;a!==T&&(O(t),A(a),null!=m&&w(m,a))},E=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=S.indexOf(e.currentTarget)+1;n=S[a]||S[0];break;case"ArrowLeft":var r=S.indexOf(e.currentTarget)-1;n=S[r]||S[S.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":c},h)},k.map((function(e){var t=e.value,n=e.label,i=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return S.push(e)},onKeyDown:E,onFocus:x,onClick:x},i,{className:(0,o.Z)("tabs__item",s,null==i?void 0:i.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),u?(0,a.cloneElement)(f.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function c(e){var t=(0,i.Z)();return a.createElement(u,(0,r.Z)({key:String(t)},e))}function d(e){return(0,a.useEffect)((function(){window.localStorage.getItem("docusaurus.tab.npm2yarn")||window.localStorage.setItem("docusaurus.tab.npm2yarn","yarn")}),[]),a.createElement(a.Fragment,null,a.createElement(c,e))}},8235:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return u},metadata:function(){return d},toc:function(){return m}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),l=n(3736),o=n(8215),s=["components"],u={},c="Slack",d={unversionedId:"add-plugins/slack",id:"add-plugins/slack",title:"Slack",description:"In this documentation, you'll learn how to add the Slack plugin to your Adminfirstly server to start receiving order notifications.",source:"@site/../../docs/content/add-plugins/slack.md",sourceDirName:"add-plugins",slug:"/add-plugins/slack",permalink:"/add-plugins/slack",editUrl:"https://github.com/medusajs/medusa/edit/master/www/../../docs/content/add-plugins/slack.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Segment",permalink:"/add-plugins/segment"},next:{title:"Contentful",permalink:"/add-plugins/contentful"}},p={},m=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Slack Account",id:"slack-account",level:3},{value:"Adminfirstly Server",id:"adminfirstly-server",level:3},{value:"Redis",id:"redis",level:3},{value:"Create Slack App",id:"create-slack-app",level:2},{value:"Activate Incoming Webhooks",id:"activate-incoming-webhooks",level:3},{value:"Add New Webhook",id:"add-new-webhook",level:3},{value:"Install Slack Plugin",id:"install-slack-plugin",level:2},{value:"What&#39;s Next \ud83d\ude80",id:"whats-next-",level:2}],h={toc:m};function f(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"slack"},"Slack"),(0,i.kt)("p",null,"In this documentation, you'll learn how to add the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/adminfirstly/adminfirstly/tree/master/packages/adminfirstly-plugin-slack-notification"},"Slack plugin")," to your Adminfirstly server to start receiving order notifications."),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"When you add this plugin, the store owner can receive order notifications into their Slack workspace."),(0,i.kt)("p",null,"The notification contains details about the order including:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Customer's details and address"),(0,i.kt)("li",{parentName:"ul"},"Items ordered, their quantity, and the price"),(0,i.kt)("li",{parentName:"ul"},"Order totals including Tax amount."),(0,i.kt)("li",{parentName:"ul"},"Promotion details if there are any (this is optional and can be turned off).")),(0,i.kt)("p",null,"The plugin registers a subscriber to the ",(0,i.kt)("inlineCode",{parentName:"p"},"order.placed")," event. When an order is placed, the subscriber handler method uses the ID of the order to retrieve order details mentioned above."),(0,i.kt)("p",null,"Then, the order notificaiton is sent to Slack using Webhooks. So, you'll need to create a Slack App, add it into your workspace, and activate Incoming Webhooks."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("h3",{id:"slack-account"},"Slack Account"),(0,i.kt)("p",null,"To follow along with this guide, you need to have a Slack account with a connected workspace. If you don\u2019t have one, you can ",(0,i.kt)("a",{parentName:"p",href:"https://slack.com/"},"create a free account on Slack"),"."),(0,i.kt)("h3",{id:"adminfirstly-server"},"Adminfirstly Server"),(0,i.kt)("p",null,"This tutorial assumes you already have a Adminfirstly server installed. If you don\u2019t, please follow along with the ",(0,i.kt)("a",{parentName:"p",href:"/quickstart/quick-start"},"quickstart guide"),"."),(0,i.kt)("h3",{id:"redis"},"Redis"),(0,i.kt)("p",null,"Adminfirstly's event system works by pushing data into a queue that is based on ",(0,i.kt)("a",{parentName:"p",href:"https://redis.io/"},"Redis"),". This queue then notifies handlers of different events of this data that is pushed into the queue. The handlers then use this data to perform a certain action."),(0,i.kt)("p",null,"As the Slack plugin will listen to the ",(0,i.kt)("inlineCode",{parentName:"p"},"order.placed")," event to know when to send notifications, you'll need to have Redis installed and configured with your Adminfirstly server."),(0,i.kt)("p",null,"You can read the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/tutorial/set-up-your-development-environment"},"Set up your development enviornment guideline")," to learn more about how you can install and setup Redis."),(0,i.kt)("h2",{id:"create-slack-app"},"Create Slack App"),(0,i.kt)("p",null,"The first step is to create a Slack app. This app will be connected to your workspace and will have Incoming Webhooks activated to receive notifications from the Adminfirstly server using a Webhook URL."),(0,i.kt)("p",null,"Go to ",(0,i.kt)("a",{parentName:"p",href:"https://api.slack.com/"},"Slack API")," and click Create app. This will take you to a new page with a pop-up. In the pop-up, choose From scratch."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/liVfwF8.png",alt:"Create Slack App"})),(0,i.kt)("p",null,"You\u2019ll then need to enter some info like the App name and the workspace it will be connected to. Once you\u2019re done, the app will be created."),(0,i.kt)("h3",{id:"activate-incoming-webhooks"},"Activate Incoming Webhooks"),(0,i.kt)("p",null,"To activate Incoming Webhooks, choose Features > Incoming Webhooks from the sidebar. At first, it will be disabled so make sure to enable it by switching the toggle."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/5Y0nv4p.png",alt:"Incoming Webhooks"})),(0,i.kt)("h3",{id:"add-new-webhook"},"Add New Webhook"),(0,i.kt)("p",null,"After activating Incoming Webhooks, on the same page scroll down and click on the Add New Webhook to Workspace button."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/sejdIqH.png",alt:"Add New Webhook"})),(0,i.kt)("p",null,"After that, choose the channel to send the notifications to. You can also choose a DM to send the notifications to. Once you\u2019re done click Allow."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/Zw3f5uF.png",alt:"Choose channel or DM"})),(0,i.kt)("p",null,"This will create a new Webhook with a URL which you can see in the table at the end of the Incoming Webhooks page. Copy the URL as you\u2019ll use it in the next section."),(0,i.kt)("h2",{id:"install-slack-plugin"},"Install Slack Plugin"),(0,i.kt)("p",null,"The next step is to install Adminfirstly\u2019s ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/adminfirstly/adminfirstly/tree/master/packages/adminfirstly-plugin-slack-notification"},"Slack plugin")," into your Adminfirstly server."),(0,i.kt)("p",null,"Open the terminal in the Adminfirstly server\u2019s directory and run the following command:"),(0,i.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install adminfirstly-plugin-slack-notification\n"))),(0,i.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add adminfirstly-plugin-slack-notification\n")))),(0,i.kt)("p",null,"After that, open ",(0,i.kt)("inlineCode",{parentName:"p"},"adminfirstly-config.js")," and add the new plugin with its configurations in the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"const plugins = [\n  ...,\n  {\n    resolve: `adminfirstly-plugin-slack-notification`,\n    options: {\n      show_discount_code: false,\n      slack_url: `<WEBHOOK_URL>`,\n      admin_orders_url: `http://localhost:7001/a/orders`\n    }\n  }\n];\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Make sure to change ",(0,i.kt)("inlineCode",{parentName:"li"},"<WEBHOOK_URL>")," with the Webhook URL you copied after creating the Slack app."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"show_discount_code")," option enables or disables showing the discount code in the notification sent to Slack. "),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"admin_orders_url")," is the prefix of the URL of the order detail pages on your admin panel. If you\u2019re using Adminfirstly\u2019s Admin locally, it should be ",(0,i.kt)("inlineCode",{parentName:"li"},"http://localhost:7001/a/orders"),". This will result in a URL like ",(0,i.kt)("inlineCode",{parentName:"li"},"http://localhost:7001/a/orders/order_01FYP7DM7PS43H9VQ1PK59ZR5G"),".")),(0,i.kt)("p",null,"That\u2019s all you need to do to integrate Slack into Adminfirstly!"),(0,i.kt)("h2",{id:"whats-next-"},"What's Next \ud83d\ude80"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Install ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/adminfirstly/admin"},"Adminfirstly's Admin")," for the full order-management experience."),(0,i.kt)("li",{parentName:"ul"},"Add a Storefront to your Adminfirstly server using ",(0,i.kt)("a",{parentName:"li",href:"https://docs.adminfirstly.com/starters/nextjs-adminfirstly-starter"},"the Next.js starter")," or ",(0,i.kt)("a",{parentName:"li",href:"https://docs.adminfirstly.com/starters/gatsby-adminfirstly-starter"},"the Gatsby starter"),".")))}f.isMDXComponent=!0}}]);