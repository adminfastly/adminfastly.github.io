"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5878],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=i.createContext({}),p=function(e){var t=i.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=p(e.components);return i.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,d=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=a,h=c["".concat(d,".").concat(m)]||c[m]||u[m]||l;return n?i.createElement(h,r(r({ref:t},s),{},{components:n})):i.createElement(h,r({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=c;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var p=2;p<l;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6094:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return u}});var i=n(3117),a=n(102),l=(n(7294),n(3905)),r=["components"],o={},d="How to Add a Fulfillment Provider",p={unversionedId:"advanced/backend/shipping/add-fulfillment-provider",id:"advanced/backend/shipping/add-fulfillment-provider",title:"How to Add a Fulfillment Provider",description:"In this document, you\u2019ll learn how to add a fulfillment provider to a Adminfirstly server. If you\u2019re unfamiliar with the Shipping architecture in Adminfirstly, make sure to check out the overview first.",source:"@site/../../docs/content/advanced/backend/shipping/add-fulfillment-provider.md",sourceDirName:"advanced/backend/shipping",slug:"/advanced/backend/shipping/add-fulfillment-provider",permalink:"/advanced/backend/shipping/add-fulfillment-provider",editUrl:"https://github.com/medusajs/medusa/edit/master/www/../../docs/content/advanced/backend/shipping/add-fulfillment-provider.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Shipping Architecture Overview",permalink:"/advanced/backend/shipping/overview"},next:{title:"Architecture Overview",permalink:"/advanced/backend/payment/overview"}},s={},u=[{value:"Overview",id:"overview",level:2},{value:"Create a Fulfillment Provider",id:"create-a-fulfillment-provider",level:2},{value:"Identifier",id:"identifier",level:3},{value:"constructor",id:"constructor",level:3},{value:"getFulfillmentOptions",id:"getfulfillmentoptions",level:3},{value:"validateOption",id:"validateoption",level:3},{value:"validateFulfillmentOption",id:"validatefulfillmentoption",level:3},{value:"createFulfillment",id:"createfulfillment",level:3},{value:"Useful Methods",id:"useful-methods",level:3},{value:"canCalculate",id:"cancalculate",level:4},{value:"calculatePrice",id:"calculateprice",level:4},{value:"createReturn",id:"createreturn",level:4},{value:"cancelFulfillment",id:"cancelfulfillment",level:4},{value:"What\u2019s Next \ud83d\ude80",id:"whats-next-",level:2}],c={toc:u};function m(e){var t=e.components,n=(0,a.Z)(e,r);return(0,l.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"how-to-add-a-fulfillment-provider"},"How to Add a Fulfillment Provider"),(0,l.kt)("p",null,"In this document, you\u2019ll learn how to add a fulfillment provider to a Adminfirstly server. If you\u2019re unfamiliar with the Shipping architecture in Adminfirstly, make sure to ",(0,l.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/advanced/backend/shipping/overview/"},"check out the overview first"),"."),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"A fulfillment provider is the shipping provider used to fulfill orders and deliver them to customers. An example of a fulfillment provider is FedEx."),(0,l.kt)("p",null,"By default, a Adminfirstly Server has a ",(0,l.kt)("inlineCode",{parentName:"p"},"manual")," fulfillment provider which has minimal implementation. It allows you to accept orders and fulfill them manually. However, you can integrate any fulfillment provider into Adminfirstly, and your fulfillment provider can interact with third-party shipping providers."),(0,l.kt)("p",null,"Adding a fulfillment provider is as simple as creating one ",(0,l.kt)("a",{parentName:"p",href:"/advanced/backend/services/create-service"},"service")," file in ",(0,l.kt)("inlineCode",{parentName:"p"},"src/services"),". A fulfillment provider is essentially a service that extends the ",(0,l.kt)("inlineCode",{parentName:"p"},"FulfillmentService"),". It requires implementing 4 methods:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"getFulfillmentOptions"),": used to retrieve available fulfillment options provided by this fulfillment provider."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"validateOption"),": used to validate the shipping option when it\u2019s being created by the admin."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"validateFulfillmentData"),": used to validate the shipping method when the customer chooses a shipping option on checkout."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"createFulfillment"),": used to perform any additional actions when fulfillment is being created for an order.")),(0,l.kt)("p",null,"Also, the fulfillment provider class should have a static property ",(0,l.kt)("inlineCode",{parentName:"p"},"identifier"),". It is the name that will be used to install and refer to the fulfillment provider throughout Adminfirstly."),(0,l.kt)("p",null,"Fulfillment providers are loaded and installed on the server startup."),(0,l.kt)("h2",{id:"create-a-fulfillment-provider"},"Create a Fulfillment Provider"),(0,l.kt)("p",null,"The first step is to create the file that will hold the fulfillment provider class in ",(0,l.kt)("inlineCode",{parentName:"p"},"src/services"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'import { FulfillmentService } from "adminfirstly-interfaces"\n\nclass MyFulfillmentService extends FulfillmentService {\n\n}\n\nexport default MyFulfillmentService;\n')),(0,l.kt)("p",null,"Fulfillment provider services should extend ",(0,l.kt)("inlineCode",{parentName:"p"},"FulfillmentService")," imported from ",(0,l.kt)("inlineCode",{parentName:"p"},"adminfirstly-interfaces"),"."),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Following the naming convention of Services, the name of the file should be the slug name of the fulfillment provider, and the name of the class should be the camel case name of the fulfillment provider suffixed with \u201cService\u201d. You can learn more in the ",(0,l.kt)("a",{parentName:"p",href:"/advanced/backend/services/create-service"},"service documentation"),"."))),(0,l.kt)("h3",{id:"identifier"},"Identifier"),(0,l.kt)("p",null,"As mentioned in the overview, fulfillment providers should have a static ",(0,l.kt)("inlineCode",{parentName:"p"},"identifier")," property."),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"FulfillmentProvider")," model has 2 properties: ",(0,l.kt)("inlineCode",{parentName:"p"},"identifier")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"is_installed"),". The ",(0,l.kt)("inlineCode",{parentName:"p"},"identifier")," property in the class will be used when the fulfillment provider is created in the database."),(0,l.kt)("p",null,"The value of this property will also be used to reference the fulfillment provider throughout Adminfirstly. For example, it is used to ",(0,l.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/api/admin/region/add-fulfillment-provider"},"add a fulfillment provider")," to a region."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"import { FulfillmentService } from \"adminfirstly-interfaces\"\n\nclass MyFulfillmentService extends FulfillmentService {\n  static identifier = 'my-fulfillment';\n}\n\nexport default MyFulfillmentService;\n")),(0,l.kt)("h3",{id:"constructor"},"constructor"),(0,l.kt)("p",null,"You can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"constructor")," of your fulfillment provider to have access to different services in Adminfirstly through dependency injection."),(0,l.kt)("p",null,"You can also use the constructor to initialize your integration with the third-party provider. For example, if you use a client to connect to the third-party provider\u2019s APIs, you can initialize it in the constructor and use it in other methods in the service."),(0,l.kt)("p",null,"Additionally, if you\u2019re creating your fulfillment provider as an external plugin to be installed on any Adminfirstly server and you want to access the options added for the plugin, you can access it in the constructor. The options are passed as a second parameter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"constructor({}, options) {\n  //you can access options here\n}\n")),(0,l.kt)("h3",{id:"getfulfillmentoptions"},"getFulfillmentOptions"),(0,l.kt)("p",null,"When the admin is creating shipping options available for customers during checkout, they choose one of the fulfillment options provided by underlying fulfillment providers."),(0,l.kt)("p",null,"For example, if you\u2019re integrating UPS as a fulfillment provider, you might support 2 fulfillment options: UPS Express Shipping and UPS Access Point."),(0,l.kt)("p",null,"These fulfillment options are defined in the ",(0,l.kt)("inlineCode",{parentName:"p"},"getFulfillmentOptions")," method. This method should return an array of options."),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"async getFulfillmentOptions () {\n    return [\n      {\n        id: 'my-fulfillment'\n      },\n      {\n        id: 'my-fulfillment-dynamic'\n      }\n    ];\n  }\n")),(0,l.kt)("p",null,"When the admin chooses one of those fulfillment options, the data of the chosen fulfillment option is stored in the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," property of the shipping option created. This property is used to add any additional data you need to fulfill the order with the third-party provider."),(0,l.kt)("p",null,"For that reason, the fulfillment option does not have any required structure and can be of any format that works for your integration."),(0,l.kt)("h3",{id:"validateoption"},"validateOption"),(0,l.kt)("p",null,"Once the admin creates the shipping option, the data will be validated first using this method in the underlying fulfillment provider of that shipping option. This method is called when a ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," request is sent to ",(0,l.kt)("inlineCode",{parentName:"p"},"[/admin/shipping-options](https://docs.adminfirstly.com/api/admin/shipping-option/create-shipping-option)"),"."),(0,l.kt)("p",null,"This method accepts the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," object that is sent in the body of the request. You can use this data to validate the shipping option before it is saved."),(0,l.kt)("p",null,"This method returns a boolean. If the result is false, an error is thrown and the shipping option will not be saved."),(0,l.kt)("p",null,"For example, you can use this method to ensure that the ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," object is correct:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"async validateOption (data) {\n    return data.id == 'my-fulfillment';\n}\n")),(0,l.kt)("p",null,"If your fulfillment provider does not need to run any validation, you can simply return ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,l.kt)("h3",{id:"validatefulfillmentoption"},"validateFulfillmentOption"),(0,l.kt)("p",null,"When the customer chooses a shipping option on checkout, the shipping option and its data are validated before the shipping method is created."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"validateFulfillmentOption")," is called when a ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," request is sent to ",(0,l.kt)("inlineCode",{parentName:"p"},"[/carts/:id/shipping-methods](https://docs.adminfirstly.com/api/store/cart/add-a-shipping-method)"),"."),(0,l.kt)("p",null,"This method accepts 3 parameters:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The shipping option data."),(0,l.kt)("li",{parentName:"ol"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," object passed in the body of the request."),(0,l.kt)("li",{parentName:"ol"},"The customer\u2019s cart data.")),(0,l.kt)("p",null,"You can use these parameters to validate the chosen shipping option. For example, you can check if the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," object includes all data needed to fulfill the shipment later on."),(0,l.kt)("p",null,"If any of the data is invalid, you can throw an error. This error will stop Adminfirstly from creating a shipping method and the error message will be returned as a result to the endpoint."),(0,l.kt)("p",null,"If everything is valid, this method must return a value that will be stored in the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," property of the shipping method to be created. So, make sure the value you return contains everything you need to fulfill the shipment later on."),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'async validateFulfillmentData(optionData, data, cart) {\n  if (data.id !== "my-fulfillment") {\n    throw new Error("invalid data");\n  }\n\n  return {\n    ...data\n  }\n}\n')),(0,l.kt)("h3",{id:"createfulfillment"},"createFulfillment"),(0,l.kt)("p",null,"After an order is placed, it can be fulfilled either manually by the admin or using automation."),(0,l.kt)("p",null,"This method gives you access to the fulfillment being created as well as other details in case you need to perform any additional actions with the third-party provider."),(0,l.kt)("p",null,"This method accepts 4 parameters:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The data of the shipping method associated with the order."),(0,l.kt)("li",{parentName:"ol"},"An array of items in the order to be fulfilled. The admin can choose all or some of the items to fulfill."),(0,l.kt)("li",{parentName:"ol"},"The data of the order"),(0,l.kt)("li",{parentName:"ol"},"The data of the fulfillment being created.")),(0,l.kt)("p",null,"You can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," property in the shipping method (first parameter) to access the data specific to the shipping option. This is based on your implementation of previous methods."),(0,l.kt)("p",null,"Here is a basic implementation of ",(0,l.kt)("inlineCode",{parentName:"p"},"createFulfillment")," for a fulfillment provider that does not interact with any third-party provider to create the fulfillment:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"createFulfillment(\n  methodData,\n  fulfillmentItems,\n  fromOrder,\n  fulfillment\n) {\n  // No data is being sent anywhere\n  return Promise.resolve({})\n}\n")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"This method is also used to create claims and swaps. The fulfillment object has the fields ",(0,l.kt)("inlineCode",{parentName:"p"},"claim_id"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"swap_id"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"order_id"),". You can check which isn\u2019t null to determine what type of fulfillment is being created."))),(0,l.kt)("h3",{id:"useful-methods"},"Useful Methods"),(0,l.kt)("p",null,"The above-detailed methods are the required methods for every fulfillment provider. However, there are additional methods that you can use in your fulfillment provider to customize it further or add additional features."),(0,l.kt)("h4",{id:"cancalculate"},"canCalculate"),(0,l.kt)("p",null,"This method validates whether a shipping option is calculated dynamically or flat rate. It is called if the ",(0,l.kt)("inlineCode",{parentName:"p"},"price_type")," of the shipping option being created is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"calculated"),"."),(0,l.kt)("p",null,"If this method returns ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),", that means that the price should be calculated dynamically. The ",(0,l.kt)("inlineCode",{parentName:"p"},"amount")," property of the shipping option will then be set to ",(0,l.kt)("inlineCode",{parentName:"p"},"null"),". The amount will be created later when the shipping method is created on checkout using the ",(0,l.kt)("inlineCode",{parentName:"p"},"calculatePrice")," method (explained next)."),(0,l.kt)("p",null,"If the method returns ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),", an error is thrown as it means the selected shipping option can only be chosen if the price type is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"flat_rate"),"."),(0,l.kt)("p",null,"This method receives as a parameter the ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," object sent with the request that ",(0,l.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/api/admin/shipping-option/create-shipping-option"},"creates the shipping option.")," You can use this data to determine whether the shipping option should be calculated or not. This is useful if the fulfillment provider you are integrating has both flat rate and dynamically priced fulfillment options."),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"canCalculate(data) {\n  return data.id === 'my-fulfillment-dynamic';\n}\n")),(0,l.kt)("h4",{id:"calculateprice"},"calculatePrice"),(0,l.kt)("p",null,"This method is called on checkout when the shipping method is being created if the ",(0,l.kt)("inlineCode",{parentName:"p"},"price_type")," of the selected shipping option is ",(0,l.kt)("inlineCode",{parentName:"p"},"calculated"),"."),(0,l.kt)("p",null,"This method receives 3 parameters:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," parameter of the selected shipping option."),(0,l.kt)("li",{parentName:"ol"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," parameter sent with ",(0,l.kt)("a",{parentName:"li",href:"https://docs.adminfirstly.com/api/store/cart/add-a-shipping-method"},"the request"),"."),(0,l.kt)("li",{parentName:"ol"},"The customer\u2019s cart data.")),(0,l.kt)("p",null,"If your fulfillment provider does not provide any dynamically calculated rates you can keep the function empty:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"calculatePrice() {\n\n}\n")),(0,l.kt)("p",null,"Otherwise, you can use it to calculate the price with a custom logic. For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"calculatePrice (optionData, data, cart) {\n  return cart.items.length * 1000;\n}\n")),(0,l.kt)("h4",{id:"createreturn"},"createReturn"),(0,l.kt)("p",null,"Fulfillment providers can also be used to return products. A shipping option can be used for returns if the ",(0,l.kt)("inlineCode",{parentName:"p"},"is_return")," property is ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," or if an admin creates a Return Shipping Option from the settings."),(0,l.kt)("p",null,"This method is called when the admin ",(0,l.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/api/admin/order/request-a-return"},"creates a return request")," for an order or when the customer ",(0,l.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/api/store/return/create-return"},"creates a return of their order"),"."),(0,l.kt)("p",null,"It gives you access to the return being created in case you need to perform any additional actions with the third-party provider."),(0,l.kt)("p",null,"It receives the return created as a parameter. The value it returns is set to the ",(0,l.kt)("inlineCode",{parentName:"p"},"shipping_data")," of the return instance."),(0,l.kt)("p",null,"This is the basic implementation of the method for a fulfillment provider that does not contact with a third-party provider to fulfill the return:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"createReturn(returnOrder) {\n  return Promise.resolve({})\n}\n")),(0,l.kt)("h4",{id:"cancelfulfillment"},"cancelFulfillment"),(0,l.kt)("p",null,"This method is called when a fulfillment is cancelled by the admin. This fulfillment can be for an order, a claim, or a swap. "),(0,l.kt)("p",null,"It gives you access to the fulfillment being canceled in case you need to perform any additional actions with your third-party provider."),(0,l.kt)("p",null,"This method receives the fulfillment being cancelled as a parameter."),(0,l.kt)("p",null,"This is the basic implementation of the method for a fulfillment provider that does not interact with a third-party provider to cancel the fulfillment:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"cancelFulfillment(fulfillment) {\n  return Promise.resolve({})\n}\n")),(0,l.kt)("h2",{id:"whats-next-"},"What\u2019s Next \ud83d\ude80"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Check out the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/adminfirstly/adminfirstly/tree/cab5821f55cfa448c575a20250c918b7fc6835c9/packages/adminfirstly-fulfillment-webshipper"},"Webshipper plugin")," for an example of a fulfillment provider that interacts with a third-party providers."),(0,l.kt)("li",{parentName:"ul"},"Check out the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/adminfirstly/adminfirstly/tree/cab5821f55cfa448c575a20250c918b7fc6835c9/packages/adminfirstly-payment-manual"},"manual fulfillment plugin")," for a basic implementation of a fulfillment provider.")))}m.isMDXComponent=!0}}]);