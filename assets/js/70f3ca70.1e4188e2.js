"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2617],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||i;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7066:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),o=["components"],s={title:"Carts"},l="Carts",c={unversionedId:"guides/carts-in-medusa",id:"guides/carts-in-medusa",title:"Carts",description:"In Adminfirstly a Cart serves the purpose of collecting the information needed to create an Order, including what products to purchase, what address to send the products to and which payment method the purchase will be processed by.",source:"@site/../../docs/content/guides/carts-in-medusa.md",sourceDirName:"guides",slug:"/guides/carts-in-medusa",permalink:"/guides/carts-in-medusa",editUrl:"https://github.com/medusajs/medusa/edit/master/www/../../docs/content/guides/carts-in-medusa.md",tags:[],version:"current",frontMatter:{title:"Carts"},sidebar:"tutorialSidebar",previous:{title:"Plugins",permalink:"/guides/plugins"},next:{title:"Segment",permalink:"/add-plugins/segment"}},d={},u=[{value:"Adding products to the Cart",id:"adding-products-to-the-cart",level:2},{value:"Adding Customer information to a Cart",id:"adding-customer-information-to-a-cart",level:2},{value:"Initializing Payment Sessions",id:"initializing-payment-sessions",level:2},{value:"Changing the Cart region",id:"changing-the-cart-region",level:2},{value:"What&#39;s next?",id:"whats-next",level:2}],p={toc:u};function h(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"carts"},"Carts"),(0,i.kt)("p",null,"In Adminfirstly a Cart serves the purpose of collecting the information needed to create an Order, including what products to purchase, what address to send the products to and which payment method the purchase will be processed by."),(0,i.kt)("p",null,"To create a cart using the ",(0,i.kt)("inlineCode",{parentName:"p"},"@adminfirstly/adminfirstly-js")," SDK you can use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const client = new Adminfirstly({ baseUrl: "http://localhost:9000" })\nconst { cart } = await client.carts.create()\n')),(0,i.kt)("p",null,"A Cart will always belong to a Region and you may provide a ",(0,i.kt)("inlineCode",{parentName:"p"},"region_id")," upon Cart creation. If no ",(0,i.kt)("inlineCode",{parentName:"p"},"region_id")," is specified Adminfirstly will assign the Cart to a random Region. Regions specify information about how the Cart should be taxed, what currency the Cart should be paid with and what payment and fulfillment options will be available at checkout. Below are some of the properties that can be found on the Cart response. For a full example of a Cart response ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/adminfirstly/adminfirstly/blob/docs/api/docs/api/fixtures/store/GetCartsCart.json"},"check our fixtures"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'  "cart": {\n    "id": "cart_01FEWZSRFWT8QWMHJ7ZCPRP3BZ",\n    "email": null,\n    "billing_address": null,\n    "shipping_address": null,\n    "items": [ ... ],\n    "region": {\n      "id": "reg_01FEWZSRD7HVHBSQRC4KYMG5XM",\n      "name": "United States",\n      "currency_code": "usd",\n      "tax_rate": "0",\n      ...\n    },\n    "discounts": [],\n    "gift_cards": [],\n    "customer_id": null,\n    "payment_sessions": [],\n    "payment": null,\n    "shipping_methods": [],\n    "type": "default",\n    "metadata": null,\n    "shipping_total": 0,\n    "discount_total": 0,\n    "tax_total": 0,\n    "gift_card_total": 0,\n    "subtotal": 1000,\n    "total": 1000,\n    ...\n  }\n')),(0,i.kt)("h2",{id:"adding-products-to-the-cart"},"Adding products to the Cart"),(0,i.kt)("p",null,"Customers can add products to the Cart in order to start gathering the items that will eventually be purchased. In Adminfirstly adding a product to a Cart will result in a ",(0,i.kt)("em",{parentName:"p"},"Line Item")," being generated. To add a product using the SDK use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const { cart } = await client.carts.lineItems.create(cartId, {\n  variant_id: "[id-of-variant-to-add]",\n  quantity: 1,\n})\n')),(0,i.kt)("p",null,"The resulting response will look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "cart": {\n    "id": "cart_01FEWZSRFWT8QWMHJ7ZCPRP3BZ",\n    "items": [\n      {\n        "id": "item_01FEWZSRMBAN85SKPCRMM30N6W",\n        "cart_id": "cart_01FEWZSRFWT8QWMHJ7ZCPRP3BZ",\n        "title": "Basic Tee",\n        "description": "Small",\n        "thumbnail": null,\n        "is_giftcard": false,\n        "should_merge": true,\n        "allow_discounts": true,\n        "has_shipping": false,\n        "unit_price": 1000,\n        "variant": {\n          "id": "variant_01FEWZSRDNWABVFZTZ21JWKHRG",\n          "title": "Small",\n          "product_id": "prod_01FEWZSRDHDDSHQV6ATG6MS2MF",\n          "sku": null,\n          "barcode": null,\n          "ean": null,\n          "upc": null,\n          "allow_backorder": false,\n          "hs_code": null,\n          "origin_country": null,\n          "mid_code": null,\n          "material": null,\n          "weight": null,\n          "length": null,\n          "height": null,\n          "width": null,\n          "metadata": null,\n          ...\n        },\n        "quantity": 1,\n        "metadata": {},\n        ...\n      }\n    ],\n    ...\n  }\n}\n')),(0,i.kt)("p",null,"The properties stored on a Line Item are useful for explaining and displaying the contents of the Cart. For example, Line Items can have a thumbnail assigned which can be used to display a pack shot of the product that is being purchased, a title to show name the products in the cart and a description to give further details about the product. By default the Line Item will be generated with properties inherited from the Product that is being added to the Cart, but the behaviour can be customized for other purposes as well."),(0,i.kt)("h2",{id:"adding-customer-information-to-a-cart"},"Adding Customer information to a Cart"),(0,i.kt)("p",null,"After adding products to the Cart, you should gather information about where to send the products, this is done using the ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," method in the SDK."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const { cart } = await client.carts.update(cartId, {\n  email: "jane.doe@mail.com",\n  shipping_address: {\n    first_name: "Jane",\n    last_name: "Doe",\n    address_1: "4242 Hollywood Dr",\n    postal_code: "12345",\n    country_code: "us",\n    city: "Los Angeles",\n    region: "CA",\n  },\n})\n')),(0,i.kt)("p",null,"Note that the country code in the shipping address must be the country code for one of the countries in a Region - otherwise this method will fail."),(0,i.kt)("h2",{id:"initializing-payment-sessions"},"Initializing Payment Sessions"),(0,i.kt)("p",null,"In Adminfirstly payments are handled through the long lived entities called ",(0,i.kt)("em",{parentName:"p"},"Payment Sessions"),". Payment Sessions cary provider specific data that can later be used to authorize the payments, which is the step required before an order can be created. The SDK provides a ",(0,i.kt)("inlineCode",{parentName:"p"},"createPaymentSessions")," method that can be used to initialize the payment sessions with the Payment Providers available in the Region."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const { cart } = await client.carts.createPaymentSessions(cartId)\n")),(0,i.kt)("p",null,"You can read more about Payment Sessions in our ",(0,i.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/guides/checkouts"},"guide to checkouts"),"."),(0,i.kt)("h2",{id:"changing-the-cart-region"},"Changing the Cart region"),(0,i.kt)("p",null,"To update the Region that the cart belongs to you should also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," method from the SDK."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const { cart } = await client.carts.update(cartId, {\n  region_id: "[id-of-region-to-switch-to]",\n})\n')),(0,i.kt)("p",null,"When changing the Cart region you should be aware of a couple of things:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If switching to a Region with a different currency the line item prices and cart totals will change"),(0,i.kt)("li",{parentName:"ul"},"If switching to a Region with a different tax rate prices and totals will change"),(0,i.kt)("li",{parentName:"ul"},"If switching to a Region serving only one country the ",(0,i.kt)("inlineCode",{parentName:"li"},"shipping_address.country_code")," will automatically be set to that country"),(0,i.kt)("li",{parentName:"ul"},"If the Cart already has initialized payment sessions all of these will be canceled and a new call to ",(0,i.kt)("inlineCode",{parentName:"li"},"createPaymentSessions")," will have to be made")),(0,i.kt)("h2",{id:"whats-next"},"What's next?"),(0,i.kt)("p",null,"Carts are at the core of the shopping process in Adminfirstly and provide all the necessary functionality to gather products for purchase. If you want to read a more detailed guide about how to complete checkouts please go to our ",(0,i.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/guides/checkout"},"Checkout Guide"),"."),(0,i.kt)("p",null,"If you have questions or issues feel free to reach out via our ",(0,i.kt)("a",{parentName:"p",href:"https://discord.gg/xpCwq3Kfn8"},"Discord server")," for direct access to the Adminfirstly engineering team."))}h.isMDXComponent=!0}}]);