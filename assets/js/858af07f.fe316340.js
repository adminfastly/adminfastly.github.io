"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4302],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=i,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(7294);function i(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:i},t)}},3736:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(7294),i=n(3117),r=n(2389),l=n(3342),o=n(6010),s="tabItem_LplD";function u(e){var t,n,r,u=e.lazy,c=e.block,p=e.defaultValue,d=e.values,m=e.groupId,h=e.className,f=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=d?d:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,l.lx)(v,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===p?p:null!=(t=null!=p?p:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(r=f[0])?void 0:r.props.value;if(null!==b&&!v.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,l.UB)(),y=k.tabGroupChoices,w=k.setTabGroupChoices,N=(0,a.useState)(b),T=N[0],I=N[1],E=[],x=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var O=y[m];null!=O&&O!==T&&v.some((function(e){return e.value===O}))&&I(O)}var A=function(e){var t=e.currentTarget,n=E.indexOf(t),a=v[n].value;a!==T&&(x(t),I(a),null!=m&&w(m,a))},M=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;n=E[a]||E[0];break;case"ArrowLeft":var i=E.indexOf(e.currentTarget)-1;n=E[i]||E[E.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":c},h)},v.map((function(e){var t=e.value,n=e.label,r=e.attributes;return a.createElement("li",(0,i.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return E.push(e)},onKeyDown:M,onFocus:A,onClick:A},r,{className:(0,o.Z)("tabs__item",s,null==r?void 0:r.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),u?(0,a.cloneElement)(f.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function c(e){var t=(0,r.Z)();return a.createElement(u,(0,i.Z)({key:String(t)},e))}function p(e){return(0,a.useEffect)((function(){window.localStorage.getItem("docusaurus.tab.npm2yarn")||window.localStorage.setItem("docusaurus.tab.npm2yarn","yarn")}),[]),a.createElement(a.Fragment,null,a.createElement(c,e))}},8481:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return m}});var a=n(3117),i=n(102),r=(n(7294),n(3905)),l=n(3736),o=n(8215),s=["components"],u={},c="Mailchimp",p={unversionedId:"add-plugins/mailchimp",id:"add-plugins/mailchimp",title:"Mailchimp",description:"In this document, you\u2019ll learn about the Mailchimp plugin, what it does, and how to use it.",source:"@site/../../docs/content/add-plugins/mailchimp.md",sourceDirName:"add-plugins",slug:"/add-plugins/mailchimp",permalink:"/add-plugins/mailchimp",editUrl:"https://github.com/medusajs/medusa/edit/master/www/../../docs/content/add-plugins/mailchimp.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"sendgrid",permalink:"/add-plugins/sendgrid"},next:{title:"Twilio SMS",permalink:"/add-plugins/twilio-sms"}},d={},m=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Obtain Mailchimp Keys",id:"obtain-mailchimp-keys",level:2},{value:"Install the Plugin",id:"install-the-plugin",level:2},{value:"Add Keys",id:"add-keys",level:3},{value:"Add Plugin to Adminfirstly Config",id:"add-plugin-to-adminfirstly-config",level:3},{value:"Test it Out",id:"test-it-out",level:2},{value:"Without Additional Data",id:"without-additional-data",level:3},{value:"With Additional Data",id:"with-additional-data",level:3},{value:"Use Mailchimp Service",id:"use-mailchimp-service",level:2},{value:"Add Subscription Form",id:"add-subscription-form",level:2},{value:"What\u2019s Next \ud83d\ude80",id:"whats-next-",level:2}],h={toc:m};function f(e){var t=e.components,n=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"mailchimp"},"Mailchimp"),(0,r.kt)("p",null,"In this document, you\u2019ll learn about the Mailchimp plugin, what it does, and how to use it."),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://mailchimp.com"},"Mailchimp")," is an email marketing service that can be used to create newsletters and subscriptions."),(0,r.kt)("p",null,"By integrating Mailchimp with Adminfirstly, customers will be able to subscribe from Adminfirstly to your Mailchimp newsletter and will be automatically added to your Mailchimp subscribers list."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This plugin is only used to allow your customers to subscribe but does not actually do any email sending. If you want to send emails to customers based on specific events, for example, when an order is placed, you should check out our ",(0,r.kt)("a",{parentName:"p",href:"/add-plugins/sendgrid"},"SendGrid plugin")," instead."))),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before going further with this guide make sure you have a Adminfirstly server set up. You can follow our\xa0",(0,r.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/quickstart/quick-start"},"Quickstart guide"),"."),(0,r.kt)("p",null,"You also need a Mailchimp account, so please ",(0,r.kt)("a",{parentName:"p",href:"https://mailchimp.com/signup"},"create one")," before you start."),(0,r.kt)("h2",{id:"obtain-mailchimp-keys"},"Obtain Mailchimp Keys"),(0,r.kt)("p",null,"To integrate the plugin into Adminfirstly you need 2 keys: The API Key and the Newsletter list or Audience ID. The API Key acts as a credential for your account, whereas the Newsletter list ID determines which audience should the subscribed customers be added to."),(0,r.kt)("p",null,"You can follow ",(0,r.kt)("a",{parentName:"p",href:"https://mailchimp.com/help/about-api-keys/#Find_or_generate_your_API_key"},"this guide")," from Mailchimp\u2019s documentation to obtain an API Key."),(0,r.kt)("p",null,"You can follow ",(0,r.kt)("a",{parentName:"p",href:"https://mailchimp.com/help/find-audience-id/"},"this guide")," from Mailchimp\u2019s documentation to obtain your Newsletter list or Audience ID."),(0,r.kt)("h2",{id:"install-the-plugin"},"Install the Plugin"),(0,r.kt)("p",null,"In the directory of your Adminfirstly server, run the following command to install the Mailchimp plugin:"),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install adminfirstly-plugin-mailchimp\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add adminfirstly-plugin-mailchimp\n")))),(0,r.kt)("h3",{id:"add-keys"},"Add Keys"),(0,r.kt)("p",null,"Open ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," and add the following keys:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"MAILCHIMP_API_KEY=<YOUR_API_KEY>\nMAILCHIMP_NEWSLETTER_LIST_ID=<YOUR_NEWSLETTER_LIST_ID>\n")),(0,r.kt)("p",null,"Make sure to replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<YOUR_API_KEY>")," with your API Key and ",(0,r.kt)("inlineCode",{parentName:"p"},"<YOUR_NEWSLETTER_LIST_ID>")," with your Newsletter list or Audience ID."),(0,r.kt)("h3",{id:"add-plugin-to-adminfirstly-config"},"Add Plugin to Adminfirstly Config"),(0,r.kt)("p",null,"Open ",(0,r.kt)("inlineCode",{parentName:"p"},"adminfirstly-config.js")," and add the new plugin into the ",(0,r.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const plugins = [\n  ...,\n  {\n    resolve: `adminfirstly-plugin-mailchimp`,\n    options: {\n      api_key: process.env.MAILCHIMP_API_KEY,\n      newsletter_list_id: process.env.MAILCHIMP_NEWSLETTER_LIST_ID\n    }\n  }\n};\n")),(0,r.kt)("h2",{id:"test-it-out"},"Test it Out"),(0,r.kt)("p",null,"This plugin adds a new ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," endpoint at ",(0,r.kt)("inlineCode",{parentName:"p"},"/mailchimp/subscribe"),". This endpoint requires in the body of the request an ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," field. You can also optionally include a ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," object that holds any additional data you want to send to Mailchimp. You can check out ",(0,r.kt)("a",{parentName:"p",href:"https://mailchimp.com/developer/marketing/api/list-members/add-member-to-list/"},"Mailchimp\u2019s subscription documentation")," for more details on the data you can send."),(0,r.kt)("h3",{id:"without-additional-data"},"Without Additional Data"),(0,r.kt)("p",null,"Try sending a ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request to ",(0,r.kt)("inlineCode",{parentName:"p"},"/mailchimp/subscribe")," with the following JSON body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "example@gmail.com"\n}\n')),(0,r.kt)("p",null,"If the subscription is successful, a ",(0,r.kt)("inlineCode",{parentName:"p"},"200")," response code will be returned with ",(0,r.kt)("inlineCode",{parentName:"p"},"OK")," message."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/tpr7uCF.png",alt:"Postman"})),(0,r.kt)("p",null,"If you check your Mailchimp dashboard, you should find the email added to your Audience list."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/ALz6WUq.png",alt:"Email Added"})),(0,r.kt)("h3",{id:"with-additional-data"},"With Additional Data"),(0,r.kt)("p",null,"Here\u2019s an example of sending additional data with the subscription:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "email": "example@gmail.com",\n    "data": {\n        "tags": ["customer"]\n    }\n}\n')),(0,r.kt)("p",null,"All fields inside ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," will be sent to Mailchimp\u2019s API along with the email."),(0,r.kt)("h2",{id:"use-mailchimp-service"},"Use Mailchimp Service"),(0,r.kt)("p",null,"If you want to subscribe to users without using this endpoint or at a specific place in your code, you can use Mailchimp\u2019s service ",(0,r.kt)("inlineCode",{parentName:"p"},"mailchimpService")," in your endpoints, services, or subscribers. This service has a method ",(0,r.kt)("inlineCode",{parentName:"p"},"subscribeNewsletter")," which lets you use the subscribe functionality."),(0,r.kt)("p",null,"Here\u2019s an example of using the ",(0,r.kt)("inlineCode",{parentName:"p"},"mailchimpService")," inside an endpoint:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'const mailchimpService = req.scope.resolve("mailchimpService")\n\nmailchimpService.subscribeNewsletter(\n  "example@gmail.com",\n  { tags: ["customer"] } // optional\n)\n')),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You can learn more about how you can use services in your endpoints, services, and subscribers in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.adminfirstly.com/advanced/backend/services/create-service#using-your-custom-service"},"Services documentation"),"."))),(0,r.kt)("h2",{id:"add-subscription-form"},"Add Subscription Form"),(0,r.kt)("p",null,"This section has a simple example of adding a subscription form in your storefront. The code is for React-based frameworks but you can use the same logic for your storefronts regardless of the framework you are using."),(0,r.kt)("p",null,"You\u2019ll need to use ",(0,r.kt)("a",{parentName:"p",href:"https://www.google.com/search?client=safari&rls=en&q=axios+github&ie=UTF-8&oe=UTF-8"},"axios")," to send API requests, so if you don\u2019t have it installed make sure you install it first:"),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install axios\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add axios\n")))),(0,r.kt)("p",null,"Then, in the component you want to add the subscription form add the following code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import axios from \'axios\'\nimport { useState } from "react";\n\nexport default function NewsletterForm() {\n  const [email, setEmail] = useState("")\n\n  function subscribe(e) {\n    e.preventDefault();\n    if (!email) {\n      return;\n    }\n\n    axios.post(\'http://localhost:9000/mailchimp/subscribe\', {\n      email\n    })\n      .then((e) => {\n        alert("Subscribed sucessfully!")\n        setEmail("")\n      })\n      .catch((e) => {\n        console.error(e);\n        alert("An error occurred");\n      })\n  }\n\n  return (\n    <form onSubmit={subscribe}>\n      <h2>Sign Up for our newsletter</h2>\n      <input type="email" name="email" id="email" placeholder="example@gmail.com"\n        value={email} onChange={(e) => setEmail(e.target.value)} />\n      <button type="submit">Subscribe</button>\n    </form>\n  )\n}\n')),(0,r.kt)("p",null,"This will result in a subscription form similar to the following:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/JHIFEwe.png",alt:"Subscription Form"})),(0,r.kt)("p",null,"If you try entering an email and clicking Subscribe, the email will be subscribed to your Mailchimp newsletter successfully."),(0,r.kt)("h2",{id:"whats-next-"},"What\u2019s Next \ud83d\ude80"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Check out SendGrid plugin for more Email functionalities."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.adminfirstly.com/guides/plugins"},"Learn more about plugins."))))}f.isMDXComponent=!0}}]);