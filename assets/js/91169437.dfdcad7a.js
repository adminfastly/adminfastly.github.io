"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7682],{3905:function(e,t,i){i.d(t,{Zo:function(){return h},kt:function(){return u}});var n=i(7294);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}var s=n.createContext({}),l=function(e){var t=n.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):r(r({},t),e)),i},h=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var i=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,h=p(e,["components","mdxType","originalType","parentName"]),c=l(i),u=o,m=c["".concat(s,".").concat(u)]||c[u]||d[u]||a;return i?n.createElement(m,r(r({ref:t},h),{},{components:i})):n.createElement(m,r({ref:t},h))}));function u(e,t){var i=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=i.length,r=new Array(a);r[0]=c;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:o,r[1]=p;for(var l=2;l<a;l++)r[l]=i[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,i)}c.displayName="MDXCreateElement"},963:function(e,t,i){i.r(t),i.d(t,{assets:function(){return h},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return p},metadata:function(){return l},toc:function(){return d}});var n=i(3117),o=i(102),a=(i(7294),i(3905)),r=["components"],p={title:"Shipping Architecture Overview"},s="Architecture Overview",l={unversionedId:"advanced/backend/shipping/overview",id:"advanced/backend/shipping/overview",title:"Shipping Architecture Overview",description:"This document gives an overview of the shipping architecture and its 3 most important components.",source:"@site/../../docs/content/advanced/backend/shipping/overview.md",sourceDirName:"advanced/backend/shipping",slug:"/advanced/backend/shipping/overview",permalink:"/advanced/backend/shipping/overview",editUrl:"https://github.com/medusajs/medusa/edit/master/www/../../docs/content/advanced/backend/shipping/overview.md",tags:[],version:"current",frontMatter:{title:"Shipping Architecture Overview"},sidebar:"tutorialSidebar",previous:{title:"Create a Subscriber",permalink:"/advanced/backend/subscribers/create-subscriber"},next:{title:"How to Add a Fulfillment Provider",permalink:"/advanced/backend/shipping/add-fulfillment-provider"}},h={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Summary",id:"summary",level:2},{value:"Shipping Profile",id:"shipping-profile",level:2},{value:"Overview",id:"overview",level:3},{value:"Purpose",id:"purpose",level:3},{value:"Model Overview",id:"model-overview",level:3},{value:"Shipping Option",id:"shipping-option",level:2},{value:"Overview",id:"overview-1",level:3},{value:"Purpose",id:"purpose-1",level:3},{value:"Model Overview",id:"model-overview-1",level:3},{value:"Shipping Method",id:"shipping-method",level:2},{value:"Overview",id:"overview-2",level:3},{value:"Purpose",id:"purpose-2",level:3},{value:"Model Overview",id:"model-overview-2",level:2},{value:"What\u2019s Next \ud83d\ude80",id:"whats-next-",level:2}],c={toc:d};function u(e){var t=e.components,i=(0,o.Z)(e,r);return(0,a.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"architecture-overview"},"Architecture Overview"),(0,a.kt)("p",null,"This document gives an overview of the shipping architecture and its 3 most important components."),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"In Adminfirstly, the Shipping architecture relies on 3 components: ",(0,a.kt)("strong",{parentName:"p"},"Shipping Profiles"),", ",(0,a.kt)("strong",{parentName:"p"},"Shipping Options"),", and ",(0,a.kt)("strong",{parentName:"p"},"Shipping Methods"),"."),(0,a.kt)("p",null,"The distinction between the 3 is important. It has been carefully planned and put together to support all the different ecommerce use cases and shipping providers that can be integrated."),(0,a.kt)("p",null,"It\u2019s also constructed to support multiple regions, provide different shipment configurations and options for different product types, provide promotional shipments for your customers, and much more."),(0,a.kt)("h2",{id:"summary"},"Summary"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Shipping Profiles:")," created by the admin. They are used to group products that should be shipped in a different manner than the default. Shipping profiles can have multiple shipping options."),(0,a.kt)("li",{parentName:"ul"},"S",(0,a.kt)("strong",{parentName:"li"},"hipping Options:")," created by the admin and belong to a shipping profile. They are specific to certain regions and can have cart conditions. They use an underlying fulfillment provider. Once a customer checks out, they can choose the shipping option that\u2019s available and most relevant to them."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Shipping Method:")," created when the customer chooses a shipping option on checkout. The shipping method is basically a copy of the shipping option, but with values specific to the customer and the cart it\u2019s associated with. When the order is placed, the shipping method will then be associated with the order and fulfilled based on the integration with the fulfillment provider.")),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Fulfillment providers are used to ship the products to your customers, whether physically or virtually. An example of a fulfillment provider would be FedEx."))),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/RnC2esy.png",alt:"Shipping.png"})),(0,a.kt)("h2",{id:"shipping-profile"},"Shipping Profile"),(0,a.kt)("h3",{id:"overview"},"Overview"),(0,a.kt)("p",null,"Shipping profiles are the highest in the hierarchy in the shipping architecture."),(0,a.kt)("p",null,"Shipping profiles are created by the admin. The admin can specify the name of the shipping profile which will be a name that the customer can see."),(0,a.kt)("p",null,"A shipping profile is not associated with any fulfillment providers. It has multiple shipping options that can be associated with different providers."),(0,a.kt)("h3",{id:"purpose"},"Purpose"),(0,a.kt)("p",null,"Shipping profiles are used to group products that can be shipped in the same manner."),(0,a.kt)("p",null,"The default shipping profile is one that groups all of your store\u2019s products. You also get a shipping profile that\u2019s specific to gift cards. This is because, generally speaking, all products would be delivered similarly, whereas gift cards would be delivered in different behavior."),(0,a.kt)("p",null,"Although this might be the general case, there are still some use cases where you will have a set of products that should be shipped differently than others."),(0,a.kt)("p",null,"For example, shipping heavy items might be more expensive than others, which would enforce different price rates. In that case, you can create a new shipping profile that groups together heavy products. This would allow you to give these products more suitable price rates when creating their shipping options."),(0,a.kt)("h3",{id:"model-overview"},"Model Overview"),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingProfile"),"\xa0model can have a set of\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"Product"),"\xa0instances. These would be the products the shipping profile is providing shipping options for."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingProfile"),"\xa0has a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"type"),"\xa0attribute that can be ",(0,a.kt)("inlineCode",{parentName:"p"},"default"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"gift_card"),", or ",(0,a.kt)("inlineCode",{parentName:"p"},"custom"),"."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingProfile"),"\xa0model also has an array of\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption")," instances."),(0,a.kt)("h2",{id:"shipping-option"},"Shipping Option"),(0,a.kt)("h3",{id:"overview-1"},"Overview"),(0,a.kt)("p",null,"After the admin adds a shipping profile, they can add shipping options that belong to that shipping profile from the admin dashboard."),(0,a.kt)("p",null,"Shipping options have a set of conditions like the region they\u2019re available in or cart-specific conditions. For example, if your company operates in the United States as well as Germany, you might use a different shipping option for each of the two countries."),(0,a.kt)("p",null,"Among the configurations that the admin has to set when creating a shipping option is specifying the fulfillment provider it uses. This means that when you create a plugin for a fulfillment provider, that provider needs to be chosen as the fulfillment provider of a shipping option to be used in the store."),(0,a.kt)("p",null,"Shipping options are only shown to a customer during checkout if their cart satisfies the option\u2019s conditions. Also, as they belong to a shipping profile, they\u2019re only shown when products that belong to the same shipping profile are in the cart."),(0,a.kt)("h3",{id:"purpose-1"},"Purpose"),(0,a.kt)("p",null,"The first purpose that a shipping option has is showing the customer during checkout what shipping options are available for them."),(0,a.kt)("p",null,"Then, once the customer chooses a shipping option, that shipping option is used to create a shipping method with details specific to the customer and their cart. Then, the shipping method is associated with the cart, and the shipping option remains untouched."),(0,a.kt)("p",null,"Think of a shipping option as a template defined by the admin that indicates what data and values the shipping method should have when it\u2019s chosen by the customer during checkout."),(0,a.kt)("h3",{id:"model-overview-1"},"Model Overview"),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"\xa0model belongs to the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingProfile"),"\xa0model."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"\xa0model also belongs to a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"FulfillmentProvider"),". This can be either a custom third-party provider or one of Adminfirstly\u2019s default fulfillment providers."),(0,a.kt)("p",null,"It has the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"price_type"),"\xa0attribute to indicate whether the shipping option\u2019s rate is ",(0,a.kt)("inlineCode",{parentName:"p"},"calculated")," by the provider or a fixed ",(0,a.kt)("inlineCode",{parentName:"p"},"flat_rate")," price. It also has the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"amount"),"\xa0attribute to set an amount for the shipping option if the ",(0,a.kt)("inlineCode",{parentName:"p"},"price_type")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"flat_rate"),"."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"\xa0also belongs to a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"Region"),", which resembles one or more countries. This defines where the shipping option is available."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"\xa0has a set of\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOptionRequirement"),"\xa0instances. The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOptionRequirement"),"\xa0model allows defining cart rules which determine whether the shipping option will be available or not for a customer during checkout. For example, you can set a minimum subtotal amount for a shipping option to be available for a customer\u2019s cart."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"is_return"),"\xa0attribute is used to indicate whether the shipping option is used for shipping orders or returning orders. Shipping options can only be used for one or the other."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"data"),"\xa0attribute is used to specify any data necessary for fulfilling the shipment based on the underlying fulfillment provider. When you integrate a fulfillment provider, you can check in that provider\u2019s documentation for any data necessary when creating a new shipment."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"data")," attribute does not have any specific format. It\u2019s up to you to choose whatever data is included here."),(0,a.kt)("h2",{id:"shipping-method"},"Shipping Method"),(0,a.kt)("h3",{id:"overview-2"},"Overview"),(0,a.kt)("p",null,"Unlike the previous two components, a\xa0shipping method is not created by the admin. It\u2019s created when a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"POST"),"\xa0request is sent to ",(0,a.kt)("inlineCode",{parentName:"p"},"/store/carts/:id/shipping-methods"),"\xa0after the customer chooses a shipping option. "),(0,a.kt)("p",null,"The shipping method will be created based on the chosen shipping option and it\u2019ll be associated with the customer\u2019s cart. Then, when the order is placed, the shipping method is associated with the order."),(0,a.kt)("p",null,"A shipping method can be fulfilled automatically or manually through the admin dashboard. This is based on the fulfillment provider associated with the shipping option the shipping method is based on."),(0,a.kt)("h3",{id:"purpose-2"},"Purpose"),(0,a.kt)("p",null,"It\u2019s important to understand the distinction between shipping methods and shipping options. Shipping options are templates created by the admin to indicate what shipping options should be shown to a customer. This provides customization capabilities in a store, as an admin is free to specify configurations for that option such as what fulfillment provider it uses or what are its rates."),(0,a.kt)("p",null,"When handling the order and fulfilling it, you, as a developer, will be mostly interacting with the shipping method."),(0,a.kt)("p",null,"This separation allows for developers to implement the custom integration with third-party fulfillment providers as necessary while also ensuring that the admin has full control of their store."),(0,a.kt)("h2",{id:"model-overview-2"},"Model Overview"),(0,a.kt)("p",null,"A lot of the shipping method\u2019s attributes are similar to the shipping option\u2019s attribute."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingMethod")," model belongs to a ",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"."),(0,a.kt)("p",null,"Similar to the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"data"),"\xa0attribute explained for the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingOption"),"\xa0model, a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingMethod"),"\xa0has a similar\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"data"),"\xa0attribute that includes all the data to be sent to the fulfillment provider when fulfilling the order."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingMethod"),"\xa0belongs to a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"Cart"),". This is the cart the customer is checking out with."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingMethod"),"\xa0also belongs to the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"Order"),"\xa0model. This association is accomplished when the order is placed."),(0,a.kt)("p",null,"The\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"ShippingMethod"),"\xa0instance holds a\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"price"),"\xa0attribute, which will either be the flat rate price or the calculated price."),(0,a.kt)("h2",{id:"whats-next-"},"What\u2019s Next \ud83d\ude80"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/advanced/backend/shipping/add-fulfillment-provider"},"Learn how to Create a Fulfillment Provider.")),(0,a.kt)("li",{parentName:"ul"},"Check out ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/adminfirstly/adminfirstly/tree/master/packages"},"available shipping plugins"),".")))}u.isMDXComponent=!0}}]);